define(["jquery","core/log"],function(n,e){"use strict";function o(t){this.rootel=t}return o.prototype.main=function(){var o=this;o.rootel.on("blur","input.form-control, select.form-control, textarea.form-control",function(t){var e=n(this);o.autoSave(e)}),o.rootel.on("click","#btn-addcriterion",function(t){t.preventDefault(),o.addCriterion()});var t=[];t.push(o.loadTemplate("CRITERION")),n.when.apply(n,t).then(function(){o.rootel.addClass("preloads-completed")})},o.prototype.autoSave=function(t){!t.closest("criterions").length||alert("criterion field")},o.prototype.addCriterion=function(){var e=this;Templates.render(e.templates.CRITERION,{}).done(function(t){e.rootel.find(".criterions").append(t)})},o.prototype.loadTemplate=function(t){return Templates.render(this.templates[t],{})},{init:function(){e.debug("mod_psgrading/task: initializing");var t=n("#page-local-psgrading-task");t.length?new o(t).main():e.error("mod_psgrading/task: #page-local-psgrading-task not found!")}}});