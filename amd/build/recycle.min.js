define(["jquery","core/log","core/ajax"],function(c,a,i){function n(e){this.rootel=e}return n.prototype.main=function(){c(".ps-grading-recycle-task td.ps-grading-undo-del").each(function(){c(this).on("click",function(e){console.log("Fila con la clase ps-grading-undo-del clickeada");var a=e.target.getAttribute("data-task-id");console.log(a),i.call([{methodname:"mod_psgrading_restore_task",args:{taskid:a},done:function(e){c('.ps-grading-recycle-task td.ps-grading-undo-del[data-task-id="'+a+'"]').closest("tr").remove(),c(".ps-grading-recycle-task tr").length<=1&&(c(".ps-grading-recycle-task").remove(),c(".ps-grading-pagination").remove(),c(".ps-grading-recycle-container").append('<div class="alert alert-primary" role="alert">No deleted tasks were found.</div>'))},fail:function(e){console.log(e)}}])})});this.pagination({pagerSelector:"#myPager",showPrevNext:!0,hidePageNumbers:!1,perPage:15})},n.prototype.pagination=function(e){var a=c("#ps-grading-recycle"),i=c.extend({perPage:15,showPrevNext:!0,hidePageNumbers:!1},e),a=a,n=i.perPage,r=a.children(),t=c(".pager");void 0!==i.childSelector&&(r=a.find(i.childSelector)),void 0!==i.pagerSelector&&(t=c(i.pagerSelector));var a=r.length,l=Math.ceil(a/n);t.data("curr",0),i.showPrevNext&&c('<li class="page-item"><a href="#" class="prev_link page-link" aria-label="Previous"><span aria-hidden="true">«</span></a></li>').appendTo(t);for(var d=0;d<l&&!i.hidePageNumbers;){var s=c('<li class="page-item"><a href="#" class="page-link">'+(d+1)+"</a></li>");t.append(s),d++}function o(e){var a=e*n,i=a+n;r.css("display","none").slice(a,i).show(),1<=e?t.find(".prev_link").show():t.find(".prev_link").hide(),e<l-1?t.find(".next_link").show():t.find(".next_link").hide(),t.data("curr",e),t.find(".page-item").removeClass("active"),t.find(".page-item").eq(e+1).addClass("active")}i.showPrevNext&&c('<li class="page-item"><a href="#" class="next_link page-link" aria-label="Next"><span aria-hidden="true">»</span></a></li>').appendTo(t),t.find(".page-item:first").addClass("active"),t.find(".prev_link").hide(),l<=1&&t.find(".next_link").hide(),r.hide(),r.slice(0,n).show(),t.find("li .page-link").click(function(){return o(c(this).parent().index()-1),!1}),t.find(".prev_link").click(function(){return o(parseInt(t.data("curr"))-1),!1}),t.find(".next_link").click(function(){return o(parseInt(t.data("curr"))+1),!1})},{init:function(){a.debug("mod_psgrading/classlist: initializing");var e=c("#page-mod-psgrading-recyclebin");e.length?new n(e).main():a.error("mod_psgrading/classlist: .psgrading-overview-page not found!")}}});