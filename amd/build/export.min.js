define(["jquery","core/log","core/ajax","core/templates"],function(o,t,e,n){"use strict";function r(e){var t=this;t.rootel=rootel,t.timeline=e,t.templates={EXPORTRESULT:"local_myconnect/export_result"}}return r.prototype.main=function(){var e=this,t=[];t.push(e.loadTemplate("VIEWUSERS")),o.when.apply(o,t).then(function(){e.rootel.addClass("preloads-completed"),e.export()})},r.prototype.export=function(){self.rootel.addClass("requesting"),e.call([{methodname:"local_myconnect_export",args:{timeline:self.timeline},done:function(e){console.log(e)},fail:function(e){self.rootel.removeClass("requesting"),t.error("local_myconnect/export: failed to export timeline."),t.debug(e)}}])},r.prototype.loadTemplate=function(e){return n.render(this.templates[e],{})},{init:function(e){t.debug("local_myconnect/export: initializing"),o(".exporter").first().length?new r(e).main():t.error("local_myconnect/export: exporter root element not found!")}}});