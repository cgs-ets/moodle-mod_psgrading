define(["jquery","core/log","core/ajax"],function(n,s){"use strict";function i(){}return i.prototype.main=function(s,e){var i=this,a=e+1;window.onmessage=function(e){if("saveshownext"==e.data){var t=document.getElementById("quickmark-a"),n=document.getElementById("quickmark-b");if(t.classList.contains("last")||n.classList.contains("last"))return void i.setup(s,0);e=null,e=n.classList.contains("hidden")?(t.classList.add("hidden"),n.classList.remove("hidden"),t):(n.classList.add("hidden"),t.classList.remove("hidden"),n);a++,s.length>a?(console.log("Loading next hidden url: "+s[a]),e.setAttribute("src",s[a])):(console.log("Last user loaded: "+s[a-1]),e.classList.add("last"))}},i.setup(s,e)},i.prototype.setup=function(e,t){var n,s;e.length>t&&((n=document.createElement("iframe")).setAttribute("src",e[t]),(s=document.getElementById("quickmark-a")).innerHTML="",s.appendChild(n),s.classList.remove("hidden"),s.classList.remove("last")),e.length>t+1&&((n=document.createElement("iframe")).setAttribute("src",e[t+1]),(s=document.getElementById("quickmark-b")).innerHTML="",s.appendChild(n),s.classList.add("hidden"),s.classList.remove("last"))},{init:function(e,t){s.debug("mod_psgrading/quickmark: initializing"),n("#page-mod-psgrading-quickmark").length?(new i).main(e,t):s.error("mod_psgrading/mark: #page-mod-psgrading-quickmark not found!")}}});