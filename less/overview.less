@subjectsborder: 1px dashed #ccc;

#page-mod-psgrading-overview, #page-mod-psgrading-studentoverview {
	#region-main-box .left-column {
		width: 100%;
		background: #fff;
	}
	.activity-navigation {
		display: none;
	}
	#region-main-settings-menu {
		display: none;
	}
	#region-main {
		padding: 0;
	}
	#user-notifications {
	    .alert {
		    margin: 0;
		}
	}
	.psgrading-overview {
		.header {
			margin: -1px 0px 0px 0px;
		}
		.contents-wrap {
			position: relative;
			&.is-viewas {
				background-color: #fff;
			    background-image:
			    	radial-gradient(
			      		circle at top right,
			      		yellow,
			      		#fff 170px
			    	);
			    background-position: 0px -43px;
			    background-repeat: no-repeat;
			}
			.floating-options {
				position: absolute;
			    top: 0;
			    right: 0;
			    padding: 10px;
			    a.viewas {
				    display: inline-block;
					font-style: italic;
				    font-size: 90%;
				}
			}
		}
	}
}

.psgrading-matrix {
	white-space: nowrap;
	overflow: auto;
	padding: 20px;
	font-size: 1.125em;
	.column {
	    display: inline-block;
	    vertical-align: top;
	}
	.cell {
		padding: 3px 6px;
	    line-height: 30px;
	    overflow: hidden;
	    white-space: nowrap;
	    text-overflow: ellipsis;
	    width: 140px;
	}
	.column.y-header {
		div {
			padding: 3px 6px;
		}
		.subjects {
			padding: 0;
			background-color: #f2f4f6;
			div {
				padding: 6px 6px;
				border-left: @subjectsborder;
			    border-top: @subjectsborder;
			}
			div:last-of-type {
			    border-bottom: @subjectsborder;
			}
		}
		.cell-engagement {
		    padding: 6px 6px;
		    border-left: 1px solid #fff;
		    border-bottom: 1px solid #fff;
		    //background: #f2f4f6;
		    //border-left: @subjectsborder;
		    //border-bottom: @subjectsborder;
		}
		.cell-success {
		    padding: 6px 6px;
		}
	}
	.column.task {
		position: relative;
		.cell-taskname {
			font-weight: 600;
		}
		.subjects {
			div {
				padding: 6px 6px;
			    border-top: @subjectsborder;
			}
			div:last-of-type {
			    border-bottom: @subjectsborder;
			}
		}
		.cell[data-grade="5"] {
		    background-color: @colorlevel5;
		    color: #fff;
		}
		.cell[data-grade="4"] {
		    background-color: @colorlevel4;
		}
		.cell[data-grade="3"] {
			background-color: @colorlevel3;
		}
		.cell[data-grade="2"] {
		    background-color: @colorlevel2;
		}
		.cell[data-grade="1"] {
		    background-color: @colorlevel1;
		    color: #fff;
		}
		.cell-engagement {
			padding: 6px 6px;
			//border-bottom: @subjectsborder;
			border-bottom: 1px solid #fff;
			&[data-engagement="NI"] {
			    background-color: @colorlevel5;
			    color: #fff;
			}
			&[data-engagement="A"] {
				background-color: @colorlevel3;
			}
			&[data-engagement="VG"] {
			    background-color: @colorlevel2;
			    color: #fff;
			}
			&[data-engagement="E"] {
			    background-color: @colorlevel1;
			    color: #fff;
			}
		}
		&:hover {
			box-shadow: 0 0 90px -50px #000;
			box-shadow: 0 0 0px 1px #000;
		    z-index: 1;
		}
		.cell-success {
		    padding: 6px 6px;
		}
	}

	div.column.task.last {
		.subjects {
			div {
			    border-right: @subjectsborder;
			}
		}
		//.cell-engagement {
			//border-right: @subjectsborder;
		//}
	}

	div.column.report-grades {
		.cell-report-grade {
		    padding: 0;
		    overflow: visible;
		    &>span {
				transform: skewX(-7deg);
		    	text-align: center;
		        background-color: #f2f4f6;
			    padding: 2px 6px 3px;
			    display: block;
			    margin-left: 2px;
			    width: 141px;
			    border: @subjectsborder;
			    border-bottom: 0 none;
				font-weight: 400;
		    }
		}
		.subjects {
			div {
				background-color: #f2f4f6;
				padding: 6px 13px;
				border-top: @subjectsborder;
				border-right: @subjectsborder;
				&:last-of-type {
					border-bottom: @subjectsborder;
				}
			}
		}
		.cell-blank {
			padding: 6px;
		}
		.cell-engagement {
			background-color: #f2f4f6;
			padding: 6px 13px;
			//border-bottom: @subjectsborder;
			//border-right: @subjectsborder;
			border-bottom: 1px solid #fff;
			border-right: 1px solid #fff;
		}
		.cell[data-grade="5"] {
		    background-color: @colorlevel5;
		    color: #fff;
		}
		.cell[data-grade="4"] {
		    background-color: @colorlevel4;
		}
		.cell[data-grade="3"] {
			background-color: @colorlevel3;
		}
		.cell[data-grade="2"] {
		    background-color: @colorlevel2;
		}
		.cell[data-grade="1"] {
		    background-color: @colorlevel1;
		    color: #fff;
		}
		.cell[data-grade="25"] {
		    background-color: @colorlevel5;
		    color: #fff;
		}
		.cell[data-grade="50"] {
		    background-color: @colorlevel3;
		}
		.cell[data-grade="75"] {
		    background-color: @colorlevel2;
		}
		.cell[data-grade="100"] {
		    background-color: @colorlevel1;
		    color: #fff;
		}
	}

	@subjects: Englishreadingandviewing, Englishspeakingandlistening, Englishwriting, HASS, Science, Technology, Mathsmeasurementandgeometry, Mathsnumberandalgebra, Mathsstatisticsandprobability, HPE, VisArts, Chinese, Indonesian, Music, MediaArts, Drama, engagement;
	
	.generate-subjecthovers(length(@subjects));

	.generate-subjecthovers(@i) when (@i > 0) {
		@name: extract(@subjects, @i);
			&.hover-@{name} {
		    .column.y-header div.cell-@{name} {
		        border-left: 1px solid #000 !important;
		        border-top: 1px solid #000 !important;
		        border-bottom: 1px solid #000 !important;
		        &:not(:last-of-type) {
		        	padding-bottom: 5px;
		        }
		    }
		    .column.task div.cell-@{name} {
		        border-top: 1px solid #000 !important;
		        border-bottom: 1px solid #000 !important;
		        &:not(:last-of-type) {
		        	padding-bottom: 5px;
		        }
		    }
        .column.task.last div.cell-@{name} {
            border-right: 1px solid #000 !important;
        }
		    .column.report-grades div.cell-@{name} {
		        border-top: 1px solid #000 !important;
		        border-right: 1px solid #000 !important;
		        border-bottom: 1px solid #000 !important;
		        &:not(:last-of-type) {
		        	padding-bottom: 5px;
		        }
		    }
		}
	   .generate-subjecthovers((@i - 1));
	}
	&.hover-engagement {
		.column.y-header div.cell-engagement {
			margin-top: -1px;
			padding-bottom: 6px !important;
		}
		.column.task div.cell-engagement {
			margin-top: -1px;
			padding-bottom: 6px !important;
	    }
	    .column.report-grades div.cell-engagement {
			margin-top: -1px;
			padding-bottom: 6px !important;
	    }
	}
}